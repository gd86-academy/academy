<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.academy.mapper.AuthMapper">

	<!-- 진수우 : 사원 비밀번호 수정 -->
	<update id="updateEmployeePw" parameterType="com.example.academy.dto.PasswordModifyDTO">
		UPDATE employee 
		SET employee_pw = #{employeeChangePw}
		WHERE employee_no = #{employeeNo}
	</update>

	<!-- 진수우 : 비밀번호 수정 시 현재 비밀번호 조회. -->
	<select id="selectEmployeeNowPw" parameterType="com.example.academy.dto.PasswordModifyDTO">
		SELECT EXISTS (
		    SELECT 1
		    FROM employee
		    WHERE employee_no = #{employeeNo} 
		      AND employee_pw = #{employeeNowPw}
		);
	</select>

    <!-- 진수우 : 시큐리티 로그인 시 사원 데이터베이스 조회. -->
    <select id="findByUsername" resultType="com.example.academy.vo.Employee">
        SELECT employee_no employeeNo
        , employee_pw employeePw
        , employee_role employeeRole
        FROM employee
        WHERE employee_no = #{employeeNo}
    </select>
    
</mapper>