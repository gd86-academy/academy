<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.academy.mapper.WaitApprovalMapper">
	<!-- 박시현 : 메인페이지 - 미결재리스트 출력 -->
	<select id="selectWaitApprovalList">
		SELECT 
		    re.approval_employee_no,
		    re.attendance_approval_no,
		    re.lecture_approval_no,
		    re.approval_employee_status,
		    la.lecture_approval_title,
		    la.create_date AS lecture_create_date,
		    aa.attendance_approval_title,
		    aa.create_date AS attendance_create_date,
		    e.employee_name
		FROM approval_employee re  
		LEFT OUTER JOIN lecture_approval la ON la.lecture_approval_no = re.lecture_approval_no
		LEFT OUTER JOIN attendance_approval aa ON aa.attendance_approval_no = re.attendance_approval_no
		LEFT OUTER JOIN employee e ON e.employee_no = re.approver
		WHERE re.approver = #{employeeNo}
		  AND re.approval_employee_status = 'AS001'
		LIMIT 5;
	</select>
</mapper>