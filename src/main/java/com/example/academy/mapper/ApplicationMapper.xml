<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.academy.mapper.ApplicationMapper">
	<select id="selectApplicationList" parameterType="Integer"
									resultType="com.example.academy.dto.applicationListDTO" >
		SELECT
			la.lecture_approval_no lectureApprovalNo
			, la.lecture_approval_title lectureApprovalTitle
			, e.employee_name employeeName
			, c.`name` status
		FROM lecture_approval la
		LEFT OUTER JOIN employee e ON e.employee_no = la.lecturer
		LEFT OUTER JOIN common c ON c.`code` = la.lecture_approval_status
		WHERE la.use_yn = 1 AND e.employee_no = #{employeeNo}
		
		UNION ALL
		
		SELECT
			ap.attendance_approval_no attendanceApprovalNo
			, ap.attendance_approval_title attendanceApprovalTitle
			, name.name NAME
			, status.name status
		FROM attendance_approval ap
		LEFT OUTER JOIN employee e ON e.employee_no = ap.employee_no
		LEFT OUTER JOIN common name ON name.`code` = ap.attendance_approval_type
		LEFT OUTER JOIN common status ON status.`code` = ap.attendance_approval_status
		WHERE ap.use_yn = 1 AND ap.employee_no = #{employeeNo}
	</select>
</mapper>